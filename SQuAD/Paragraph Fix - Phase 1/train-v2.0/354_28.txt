Network effects are a large factor with electrification. When converting lines to electric, the connections with other lines must be considered. Some electrifications have subsequently been removed because of the through traffic to non-electrified lines. If through traffic is to have any benefit, time consuming engine switches must occur to make such connections or expensive dual mode engines must be used. This is mostly an issue for long distance trips, but many lines come to be dominated by through traffic from long-haul freight trains (usually running coal, ore, or containers to or from ports). 
In theory, these trains could enjoy dramatic savings through electrification, but it can be too costly to extend electrification to isolated areas, and unless an entire network is electrified, companies often find that they need to continue use of diesel trains even if sections are electrified. The increasing demand for container traffic which is more efficient when utilizing the double-stack car also has network effect issues with existing electrifications due to insufficient clearance of overhead electrical lines for these trains, but electrification can be built or modified to have sufficient clearance, at additional cost.
